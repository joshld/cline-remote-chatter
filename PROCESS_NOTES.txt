=== CLINE BOT PROCESS MANAGEMENT NOTES ===

PROBLEM:
- Cline processes are orphaned after /start and /stop commands
- Current process tree: cline (2713094) -> cline-host (2713233) -> cline-core.js (2713234)
- These should be killed when /stop is issued but aren't

CURRENT UNCOMMITTED CHANGES:
1. Added psutil to requirements.txt
2. Added extensive process management code (100+ lines):
   - _find_child_processes()
   - _kill_process_tree() 
   - _ensure_session_clean()
   - Enhanced stop_pty_session() with process tree killing

ANALYSIS:
- Your current code uses os.setsid() to create process groups
- Uses psutil to find and kill child processes
- But orphaned processes still exist, suggesting the cleanup isn't working

FIX_SUMMARY.md RECOMMENDATION:
- Minimal fix: just remove --interactive flag + add 3 command handlers
- No complex process management needed
- But this doesn't address the orphaned process issue

NEXT STEPS:
1. Kill current orphaned processes
2. Test if current implementation prevents new orphans
3. If still failing, debug why _kill_process_tree() isn't working
4. Consider if simpler approach (process groups + os.killpg) is better than psutil

KEY QUESTION:
Is the problem:
- The cleanup code isn't being called?
- The cleanup code is buggy?
- Process tree is too complex for the cleanup logic?
